# Roadmap & Future Features 🚀

現在の「Torn Market Chart」は、個人のトレーダーが高頻度で市場を監視し、裁定取引（アービトラージ）や投資を行うための **"Core MVP"** として完成しています。
以下は、さらにシステムを拡張・高機能化するための未実装機能（TODO）リストです。

## 1. ユーザー管理とセキュリティ (Authentication)
現在、システムは単一ユーザー（または共有管理者）を想定しています。これをマルチユーザー化します。

- [ ] **Discord OAuth2 ログイン**: Discordアカウントでログイン可能にする。
- [ ] **ユーザー別ウォッチリスト**: ユーザーごとに異なる監視アイテム、アラート設定を保存する（現在は全員で共有）。
- [ ] **APIキーのスコープ管理**: ユーザーが自分のTorn APIキーを登録し、そのユーザーの権限でデータを取得するモード。

## 2. データ分析とチャートの高度化 (Advanced Analytics)
TimescaleDBの機能をフル活用し、より深い分析を提供します。

- [ ] **連続集計 (Continuous Aggregates)**: 
    - 現在は生データをそのまま表示していますが、TimescaleDBの機能を使って「1時間足」「4時間足」「日足」をDB側で自動生成・高速化します。
- [ ] **ローソク足チャート (Candlestick Charts)**:
    - 現在のエリア/ラインチャートに加え、始値・高値・安値・終値 (OHLC) を用いたローソク足表示を実装。
- [ ] **テクニカル指標**:
    - 移動平均線 (SMA/EMA) に加え、RSI, MACD, ボリンジャーバンドなどをチャートに重ねて表示。

## 3. UI/UX の向上
- [ ] **PWA (Progressive Web App) 対応**: スマホのホーム画面に追加して、ネイティブアプリのように使えるようにする。
- [x] **コマンドパレット (Cmd+K)**: キーボードだけでアイテム検索やページ移動ができる機能。
- [ ] **公開共有リンク**: 特定のチャート設定を "Read-only" URLとして発行し、他人にシェアできる機能。

## 4. 連携機能の強化
- [x] **Discord Bot (Interactive)**:
    - Webhookによる通知だけでなく、Discordから `/price [item]` で価格を問い合わせられるBot機能。
- [ ] **ブラウザ拡張機能 (Userscript) 連携**:
    - ユーザーがTornを閲覧中に、「自分のインベントリの価値」や「市場価格との乖離」をオーバーレイ表示する拡張機能。

## 5. インフラ・パフォーマンス
- [ ] **水平スケーリング**: `workers` を複数台のサーバーで起動した場合の、Redisを使った排他制御（現在は単一インスタンス前提）。
- [ ] **バックアップ自動化**: TimescaleDBの定期バックアップとS3への転送。

---

### 優先度 (Priority)
1. **Continuous Aggregates**: データ量が増えた際のパフォーマンス維持に必須。
2. **Discord OAuth**: チームやファクションで共有する場合に必要。
3. **Candlestick Charts**: トレーダーからの要望が高い機能。
