:root {
    --bg-dark: #000000;
    --bg-card: #121212;
    --text-primary: #f8fafc;
    --text-secondary: #a0a0a0;
    --accent: #3b82f6;
    --accent-hover: #2563eb;
    --danger: #ef4444;
    --success: #10b981;
    --border: #333333;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Inter', sans-serif;
}

body {
    background-color: var(--bg-dark);
    color: var(--text-primary);
    height: 100vh;
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

/* Header */
header {
    padding: 1rem 2rem;
    background-color: var(--bg-card);
    border-bottom: 1px solid var(--border);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

h1 {
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--text-primary);
}

/* Layout */
.container {
    display: flex;
    flex: 1;
    overflow: hidden;
}

/* Sidebar - Item List */
.sidebar {
    width: 250px;
    background-color: var(--bg-card);
    border-right: 1px solid var(--border);
    overflow-y: auto;
    display: flex;
    flex-direction: column;
}

.sidebar-header {
    padding: 1rem;
    border-bottom: 1px solid var(--border);
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--text-secondary);
}

.item-list {
    list-style: none;
}

.item-list li {
    padding: 0.75rem 1rem;
    cursor: pointer;
    border-bottom: 1px solid var(--border);
    transition: background 0.2s;
    font-size: 0.9rem;
    display: flex;
    align-items: center;
    gap: 10px;
}

.item-icon {
    width: 30px;
    height: auto;
    display: block;
}

.item-list li:hover {
    background-color: rgba(59, 130, 246, 0.1);
}

.item-list li.active {
    background-color: rgba(59, 130, 246, 0.2);
    border-left: 3px solid var(--accent);
}

/* Main Content */
.main-content {
    flex: 1;
    display: flex;
    flex-direction: row;
    position: relative;
    /* Necessary for absolute positioning of children */
    overflow: hidden;
}

/* Chart takes up the full space now */
.chart-wrapper {
    flex: 1;
    /* Takes full width */
    display: flex;
    flex-direction: column;
    min-width: 0;
    /* No border right needed as panel is overlay */
}


/* Chart Toolbar Styles - Restored */
.chart-toolbar {
    display: flex;
    gap: 1rem;
    align-items: center;
    background: var(--bg-card);
    padding: 0.75rem 1rem;
    border-bottom: 1px solid var(--border);
    flex-wrap: wrap;
}

.chart-toolbar select {
    padding: 0.35rem;
    border-radius: 4px;
    background: var(--bg-dark);
    color: var(--text-primary);
    border: 1px solid var(--border);
    font-size: 0.85rem;
}

.toolbar-group {
    display: flex;
    gap: 0.5rem;
    align-items: center;
    font-size: 0.85rem;
    color: var(--text-secondary);
    border-left: 1px solid var(--border);
    padding-left: 1rem;
}

.toolbar-group:first-child {
    border-left: none;
    padding-left: 0;
}

.chart-container {
    position: relative;
    flex: 1;
    overflow: hidden;
    width: 100%;
}

#chart {
    width: 100%;
    height: 100%;
}

/* Right Panel - Order Book (Overlay) - Moved to Left per request */
.order-book-panel {
    position: absolute;
    top: 60px;
    /* Offset to avoid hiding toolbar */
    left: 0;
    /* Moved to left */
    right: auto;
    bottom: auto;
    /* Allow height to shrink */
    max-height: 100%;
    /* But limit to screen height */
    width: 320px;
    background: rgba(18, 18, 18, 0.6);
    backdrop-filter: blur(8px);
    border-right: 1px solid rgba(255, 255, 255, 0.1);
    /* Border on right now */
    border-left: none;
    display: flex;
    flex-direction: column;
    overflow-y: auto;
    /* Scroll if too long */
    z-index: 10;
}

/* Ensure chart controls stay clickable if they are under the panel?
   Actually, chart toolbar is at top, panel is full height on right.
   Chart content under panel might be obscured, but that's expected. */

.status-panel {
    padding: 1.5rem;
    background: transparent;
    /* Remove solid background */
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    align-items: center;
    justify-content: center;
    min-height: 120px;
}

.current-price {
    font-size: 2rem;
    font-weight: 700;
    color: var(--text-primary);
}

.price-change {
    font-size: 1rem;
    font-weight: 600;
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
}

.price-change.positive {
    color: var(--success);
    background: rgba(16, 185, 129, 0.1);
}

.price-change.negative {
    color: var(--danger);
    background: rgba(239, 68, 68, 0.1);
}

.order-book-header {
    padding: 1rem;
    font-weight: 600;
    color: var(--text-secondary);
    border-bottom: 1px solid var(--border);
    display: grid;
    grid-template-columns: 1fr 1fr 60px;
    gap: 1rem;
}

.order-book-list {
    flex: 1;
    overflow-y: auto;
    padding: 0;
    list-style: none;
}

.order-book-item {
    display: grid;
    grid-template-columns: 1fr 1fr 60px;
    gap: 1rem;
    padding: 0.75rem 1rem;
    border-bottom: 1px solid var(--border);
    align-items: center;
    font-size: 0.9rem;
}

.order-book-item:hover {
    background-color: var(--bg-card);
}

.buy-btn {
    background: var(--success);
    color: white;
    border: none;
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    cursor: pointer;
    font-size: 0.8rem;
    text-align: center;
    text-decoration: none;
    display: inline-block;
}

.buy-btn:hover {
    opacity: 0.9;
}

/* Mobile Responsive */
@media (max-width: 768px) {
    body {
        /* Account for bottom nav */
        padding-bottom: 60px;
    }

    .container {
        flex-direction: column;
        overflow: hidden;
        height: calc(100vh - 60px - 60px);
        /* Total height - header - nav */
    }

    /* Mobile Bottom Nav */
    .mobile-bottom-nav {
        display: flex !important;
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 60px;
        background-color: var(--bg-card);
        border-top: 1px solid var(--border);
        z-index: 100;
        justify-content: space-around;
        align-items: center;
    }

    .nav-item {
        flex: 1;
        text-align: center;
        padding: 10px;
        color: var(--text-secondary);
        font-size: 0.8rem;
        cursor: pointer;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 4px;
    }

    .nav-item.active {
        color: var(--accent);
    }

    .nav-icon {
        font-size: 1.2rem;
        font-weight: bold;
    }

    /* Tab Content Visibility */
    .mobile-tab-content {
        display: none !important;
        width: 100%;
        height: 100%;
        overflow-y: auto;
    }

    .mobile-tab-content.active {
        display: flex !important;
        flex-direction: column;
    }

    /* Sidebar (Items Tab) */
    .sidebar {
        width: 100%;
        border-right: none;
        max-height: none;
        display: none;
        /* Controlled by JS class active */
    }

    .sidebar.mobile-tab-content.active {
        display: flex !important;
    }

    /* Chart (Chart Tab) */
    .main-content {
        flex: 1;
        width: 100%;
        height: 100%;
        overflow: hidden;
        display: block;
        /* Container for chart and separate order book panel */
    }

    .chart-wrapper {
        border-right: none;
        height: 100%;
        width: 100%;
        display: none;
        /* Controlled by JS */
    }

    .chart-wrapper.mobile-tab-content.active {
        display: flex !important;
    }

    /* Order Book (Prices Tab) */
    .order-book-panel {
        position: static;
        /* No longer overlay on mobile */
        width: 100%;
        height: 100%;
        background: var(--bg-dark);
        backdrop-filter: none;
        border-right: none;
        display: none;
        /* Controlled by JS */
        z-index: 1;
    }

    .order-book-panel.mobile-tab-content.active {
        display: flex !important;
    }

    .status-panel {
        flex-direction: row;
        justify-content: space-between;
        padding: 1rem;
        min-height: auto;
        background: var(--bg-card);
    }

    .current-price {
        font-size: 1.5rem;
    }

    /* Hide desktop-only elements if needed */
    .desktop-only {
        display: none;
    }
}

/* Base style for nav (hidden on desktop) */
.mobile-bottom-nav {
    display: none;
}


/* Settings Modal */
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7);
    z-index: 100;
    justify-content: center;
    align-items: center;
}

.modal.open {
    display: flex;
}

.modal-content {
    background: var(--bg-card);
    padding: 2rem;
    border-radius: 0.75rem;
    width: 500px;
    max-width: 90%;
    max-height: 90vh;
    overflow: visible;
    border: 1px solid var(--border);
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
}

.close-btn {
    background: none;
    border: none;
    color: var(--text-secondary);
    cursor: pointer;
    font-size: 1.5rem;
}

h2 {
    font-size: 1.1rem;
    margin-bottom: 1rem;
    border-bottom: 1px solid var(--border);
    padding-bottom: 0.5rem;
}

/* Forms & Lists in Settings */
.form-group {
    display: flex;
    gap: 0.5rem;
    margin-bottom: 1rem;
}

input {
    flex: 1;
    padding: 0.5rem;
    border-radius: 0.25rem;
    border: 1px solid var(--border);
    background: var(--bg-dark);
    color: var(--text-primary);
}

button {
    padding: 0.5rem 1rem;
    border-radius: 0.25rem;
    border: none;
    cursor: pointer;
    font-weight: 500;
    transition: opacity 0.2s;
}

.btn-primary {
    background: var(--accent);
    color: white;
}

.btn-primary:hover {
    background: var(--accent-hover);
}

.btn-danger {
    background: var(--danger);
    color: white;
    padding: 0.25rem 0.5rem;
    font-size: 0.8rem;
}

.settings-list {
    margin-bottom: 2rem;
    max-height: 150px;
    overflow-y: auto;
    border: 1px solid var(--border);
    border-radius: 0.25rem;
}

.settings-list-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.5rem;
    border-bottom: 1px solid var(--border);
    font-size: 0.9rem;
}

.settings-list-item:last-child {
    border-bottom: none;
}

.hidden {
    display: none;
}